<!DOCTYPE html>
<html lang="en">

<head>
        <style>
        /* Elimina animación global de entrada para esta página */
        body { animation: none !important; }
        </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Eftimos</title>
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicon_io/favicon-16x16.png">
    <link rel="manifest" href="assets/images/favicon_io/site.webmanifest">
    <link rel="icon" type="image/png" sizes="192x192" href="assets/images/favicon_io/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="assets/images/favicon_io/android-chrome-512x512.png">

    <meta name="description"
        content="An inner house where silence, craft, and the avant-garde meet. Join to receive your access key and early access to releases and updates.">
    <meta name="keywords"
        content="Eftimos, fashion brand, lifestyle brand, exclusive clothing, premium apparel, streetwear, minimal design, modern fashion, unisex fashion, luxury clothing, belonging, individuality">

    <!-- Preload critical fonts -->
    <link rel="preload" href="assets/fonts/Helvetica.ttf" as="font" type="font/ttf" crossorigin>

    <!-- Preload critical CSS -->
    <link rel="stylesheet" href="assets/css/style.css">

    <!-- DNS prefetch for faster resource loading -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com">

    <script>
        // Set hero background before page renders (only on forward navigation)
        (function () {
            // Check if this is a back/forward navigation
            const perfEntries = performance.getEntriesByType('navigation');
            const isBackNavigation = perfEntries.length > 0 && perfEntries[0].type === 'back_forward';

            // Only set background on fresh navigation, NOT on back button
            if (!isBackNavigation) {
                const transitionData = sessionStorage.getItem('morphTransition');
                if (transitionData) {
                    const data = JSON.parse(transitionData);
                    // Add inline style to set background immediately
                    const style = document.createElement('style');
                    style.textContent = `.hero { background-image: url('${data.imageSrc}') !important; }`;
                    document.head.appendChild(style);
                }
            }
        })();
    </script>

        <!-- Mostrar menú lateral solo cuando el menú está abierto, igual que en index.html -->
        <style>
            /* Forzar .active visualmente cuando body.menu-open, para que se apliquen los estilos de .dropdown-menu.active y .dropdown-menu.active::before */
            body.menu-open #dropdownMenu {
                /* Simula .dropdown-menu.active */
                transform: translateX(0) !important;
            }
            body.menu-open #dropdownMenu::before {
                /* Simula .dropdown-menu.active::before */
                transform: translateX(0) !important;
                pointer-events: all !important;
            }
        </style>
</head>

<body style="background-color: #1a1a1a;">
    <!-- Fade-in overlay blanco -->
    <div id="entryWhiteOverlay" style="position:fixed;top:0;left:0;width:100vw;height:100vh;background:#fff;z-index:999999;pointer-events:auto;transition:opacity 0.38s cubic-bezier(.77,0,.18,1);opacity:1;"></div>
    <!-- Grain Canvas -->
    <canvas id="grainCanvas" style="opacity: 0.005;"></canvas>

    <nav class="blending-item">
        <div class="nav-container">
            <!-- Menu Hamburguesa -->
            <div class="menu-toggle" id="menuToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
            
            <!-- Logo Centrado -->
            <a href="index.html" class="logo" data-shape="circle">
                <img src="assets/images/logo-white.png" alt="Eftimos Logo" width="150" height="auto" draggable="false">
            </a>
        </div>
        
        <!-- Menú Desplegable -->
        <div class="dropdown-menu" id="dropdownMenu">
            <div class="menu-links">
                <a href="https://1peief-wi.myshopify.com/" target="_blank" rel="noopener noreferrer" class="dropdown-link">SHOP</a>
                <div class="dropdown-item-with-submenu">
                    <button class="dropdown-link dropdown-toggle" id="collectionsToggle">
                        COLLECTIONS
                        <svg class="dropdown-arrow" viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </button>
                    <div class="submenu" id="collectionsSubmenu">
                        <a href="#nierika" class="submenu-link">NIERIKA</a>
                        <a href="gallery-view.html" class="submenu-link">RESiLiENCE AW24</a>
                    </div>
                </div>
                <div class="dropdown-item-with-submenu" style="display:none;">
                <button class="dropdown-link" id="contactBtn">CONTACT</button>
            </div>
            
            <!-- Control Icons in Sidebar -->
            <div class="sidebar-controls">
                <div class="sidebar-control-buttons">
                    <button class="sidebar-control-btn" id="visualToggle" title="Toggle Visual Effects">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                            <!-- Icono de ojo abierto -->
                            <path class="eye-open" d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                            <circle class="eye-open" cx="12" cy="12" r="3"></circle>
                            <!-- Icono de ojo cerrado (oculto inicialmente) -->
                            <line class="eye-closed" style="display:none;" x1="1" y1="1" x2="23" y2="23" stroke-linecap="round"></line>
                        </svg>
                    </button>
                    <button class="sidebar-control-btn" id="audioToggle" title="Toggle Audio">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                            <!-- Altavoz abierto -->
                            <path class="speaker-on" d="M3 9v6c0 1.105.895 2 2 2h4l5 5V4H9c-1.105 0-2 .895-2 2v3z"></path>
                            <path class="speaker-on" d="M17.5 3.5a4 4 0 0 1 0 5.66M19.07 4.93a8 8 0 0 1 0 11.31"></path>
                            <!-- Altavoz mudo (oculto inicialmente) -->
                            <path class="speaker-off" style="display:none;" d="M11 5L6 9H2v6h4l5 5V5z"></path>
                            <line class="speaker-off" style="display:none;" x1="23" y1="9" x2="17" y2="15"></line>
                            <line class="speaker-off" style="display:none;" x1="17" y1="9" x2="23" y2="15"></line>
                        </svg>
                    </button>
                </div>
                <div class="control-status-message" id="statusMessage"></div>
            </div>
        </div>
    </nav>

    <!-- Contact Form Modal -->
    <div class="contact-modal" id="contactModal">
        <div class="contact-modal-content">
            <button class="contact-close" id="contactClose">&times;</button>
            <h2>CONTACT US</h2>
            <form id="contactForm">
                <div class="form-group">
                    <input type="text" id="name" name="name" placeholder="NAME" required>
                </div>
                <div class="form-group">
                    <input type="email" id="email" name="email" placeholder="EMAIL" required>
                </div>
                <div class="form-group">
                    <textarea id="message" name="message" placeholder="MESSAGE" rows="5" required></textarea>
                </div>
                <button type="submit" class="submit-btn">SEND</button>
            </form>
        </div>
    </div>

    <main>
        <section class="hero" id="heroSection" style="background-image: url(assets/images/g-11.webp);">
            <div class="container">
                <h1>AW24</h1>
            </div>
        </section>

        <section class="grid-view">
            <div class="container-fluid">
                <div class="grid-view-content">
                    <div class="item">
                        <a href="#" class="image-link">
                            <img src="assets/images/g-11.webp" alt="">
                            <span class="tooltip">AW20 Collection</span>
                        </a>
                    </div>
                    <div class="item">
                        <a href="#" class="image-link">
                            <img src="assets/images/g-12.webp" alt="">
                            <span class="tooltip">Winter Editorial</span>
                        </a>
                    </div>
                    <div class="item">
                        <a href="#" class="image-link">
                            <img src="assets/images/g-16.avif" alt="">
                            <span class="tooltip">Avant-Garde Series</span>
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Sonidos - Sistema de crossfade manual (sin loop=true para evitar bloqueo del navegador) -->
    <audio id="noiseSound" src="assets/sounds/breathing.mp3" preload="auto"></audio>
    <audio id="whispersSound" src="assets/sounds/breathing.mp3" preload="auto"></audio>
    <audio id="lockedInSound" src="assets/sounds/locked-in-oneself.mp3" preload="auto"></audio>

    <script>
    // IMPORTANTE: Configurar ANTES de cargar controls.js
    window.preloaderEnterPressed = true; // Esta página no tiene preloader
    </script>

    <!-- Load scripts - Solo los necesarios para clothes-view -->
    <script defer src="assets/js/ui-sounds.js"></script>
    <!-- script.js y grain-effect.js son para el mapa de index.html, no se usan aquí -->
    <script defer src="assets/js/cursor-effect.js"></script>
    <script src="assets/js/tooltip-nebula.js"></script>
    <script src="assets/js/controls.js"></script>

    <script>
    // Fade-in blanco rápido al entrar
    window.addEventListener('load', function() {
        var overlay = document.getElementById('entryWhiteOverlay');
        if (overlay) {
            setTimeout(function() {
                overlay.style.opacity = '0';
                setTimeout(function() {
                    overlay.parentNode && overlay.parentNode.removeChild(overlay);
                }, 380);
            }, 10); // Mostrar overlay al menos un frame
        }
    });

    // Overlay fade blanco al hacer click en el logo superior
    document.addEventListener('DOMContentLoaded', function() {
        var logoLink = document.querySelector('a.logo');
        if (logoLink) {
            logoLink.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Fade out rápido del audio breathing
                const noiseSound = document.getElementById('noiseSound');
                const whispersSound = document.getElementById('whispersSound');
                const fadeDuration = 300; // 300ms fade out
                const startTime = performance.now();
                
                function fadeOutAudio() {
                    const elapsed = performance.now() - startTime;
                    const progress = Math.min(1, elapsed / fadeDuration);
                    // Ease out cúbico para fade suave
                    const eased = 1 - Math.pow(1 - progress, 3);
                    const volume = 1 - eased;
                    
                    // Aplicar fade a ambos sonidos
                    if (noiseSound && typeof window.noiseCrossfadeSystem !== 'undefined') {
                        if (window.noiseGain) {
                            window.noiseGain.gain.value *= volume;
                        }
                    }
                    
                    if (whispersSound && typeof window.whispersCrossfadeSystem !== 'undefined') {
                        if (window.whispersGain) {
                            window.whispersGain.gain.value *= volume;
                        }
                    }
                    
                    if (progress < 1) {
                        requestAnimationFrame(fadeOutAudio);
                    } else {
                        // Fade out completado, pausar audio
                        if (noiseSound) noiseSound.pause();
                        if (whispersSound) whispersSound.pause();
                        console.log('[LOGO-CLICK] Audio fade out completed');
                    }
                }
                
                // Iniciar fade out del audio
                fadeOutAudio();
                
                // Crear overlay blanco
                var overlay = document.createElement('div');
                overlay.style.position = 'fixed';
                overlay.style.top = '0';
                overlay.style.left = '0';
                overlay.style.width = '100vw';
                overlay.style.height = '100vh';
                overlay.style.background = '#fff';
                overlay.style.zIndex = '250000';
                overlay.style.pointerEvents = 'auto';
                overlay.style.transition = 'opacity 0.38s cubic-bezier(.77,0,.18,1)';
                overlay.style.opacity = '0';
                document.body.appendChild(overlay);
                // Forzar reflow y luego fade-in
                void overlay.offsetWidth;
                overlay.style.opacity = '1';
                
                // Navegar después del fade out del audio (300ms)
                setTimeout(function() {
                    window.location.href = logoLink.href;
                }, 320); // Un poco más que el fade del audio
            });
        }
    });
    </script>

    <script>
    // (Eliminada animación/override de audio y descenso inicial)
    </script>

    <!-- (Eliminado script inline de menú para que solo controle controls.js) -->
</body>

</html>