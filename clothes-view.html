<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eftimos</title>
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicon_io/favicon-16x16.png">
    <link rel="manifest" href="assets/images/favicon_io/site.webmanifest">
    <link rel="icon" type="image/png" sizes="192x192" href="assets/images/favicon_io/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="assets/images/favicon_io/android-chrome-512x512.png">

    <meta name="description"
        content="An inner house where silence, craft, and the avant-garde meet. Join to receive your access key and early access to releases and updates.">
    <meta name="keywords"
        content="Eftimos, fashion brand, lifestyle brand, exclusive clothing, premium apparel, streetwear, minimal design, modern fashion, unisex fashion, luxury clothing, belonging, individuality">

    <!-- Preload critical fonts -->
    <link rel="preload" href="assets/fonts/Helvetica.ttf" as="font" type="font/ttf" crossorigin>
    <link rel="preload" href="assets/fonts/Helvetica-Bold.ttf" as="font" type="font/ttf" crossorigin>

    <!-- Preload critical CSS -->
    <link rel="stylesheet" href="assets/css/style.css">

    <!-- DNS prefetch for faster resource loading -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com">

    <script>
        // Set hero background before page renders (only on forward navigation)
        (function () {
            // Check if this is a back/forward navigation
            const perfEntries = performance.getEntriesByType('navigation');
            const isBackNavigation = perfEntries.length > 0 && perfEntries[0].type === 'back_forward';

            // Only set background on fresh navigation, NOT on back button
            if (!isBackNavigation) {
                const transitionData = sessionStorage.getItem('morphTransition');
                if (transitionData) {
                    const data = JSON.parse(transitionData);
                    // Add inline style to set background immediately
                    const style = document.createElement('style');
                    style.textContent = `.hero { background-image: url('${data.imageSrc}') !important; }`;
                    document.head.appendChild(style);
                }
            }
        })();
    </script>
</head>

<body style="background-color: #1a1a1a;">
    <!-- Grain Canvas -->
    <canvas id="grainCanvas" style="opacity: 0.15;"></canvas>

    <nav class="blending-item">
        <div class="nav-container">
            <!-- Menu Hamburguesa -->
            <div class="menu-toggle" id="menuToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
            
            <!-- Logo Centrado -->
            <a href="index.html" class="logo" data-shape="circle">
                <img src="assets/images/logo-white.png" alt="Eftimos Logo" width="150" height="auto" draggable="false">
            </a>
        </div>
        
        <!-- MenÃº Desplegable -->
        <div class="dropdown-menu" id="dropdownMenu">
            <div class="menu-links">
                <a href="https://1peief-wi.myshopify.com/" target="_blank" rel="noopener noreferrer" class="dropdown-link">SHOP</a>
                <div class="dropdown-item-with-submenu">
                    <button class="dropdown-link dropdown-toggle" id="collectionsToggle">
                        COLLECTIONS
                        <svg class="dropdown-arrow" viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </button>
                    <div class="submenu" id="collectionsSubmenu">
                        <a href="#nierika" class="submenu-link">NIERIKA</a>
                        <a href="#runway23" class="submenu-link">RUNWAY 23</a>
                    </div>
                </div>
                <button class="dropdown-link" id="contactBtn">CONTACT</button>
            </div>
            
            <!-- Control Icons in Sidebar -->
            <div class="sidebar-controls">
                <div class="sidebar-control-item">
                    <button class="sidebar-control-btn" id="visualToggle" title="Toggle Visual Effects">
                        <svg viewBox="0 0 24 24" width="32" height="32" fill="none" stroke="currentColor" stroke-width="2">
                            <!-- Icono de ojo abierto -->
                            <path class="eye-open" d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                            <circle class="eye-open" cx="12" cy="12" r="3"></circle>
                            <!-- Icono de ojo cerrado (oculto inicialmente) -->
                            <line class="eye-closed" style="display:none;" x1="1" y1="1" x2="23" y2="23" stroke-linecap="round"></line>
                        </svg>
                    </button>
                    <span class="control-status" id="visualStatus">VISUAL EFFECTS: ON</span>
                </div>
                <div class="sidebar-control-item">
                    <button class="sidebar-control-btn" id="audioToggle" title="Toggle Audio">
                        <svg viewBox="0 0 24 24" width="32" height="32" fill="none" stroke="currentColor" stroke-width="2">
                            <!-- Altavoz abierto -->
                            <path class="speaker-on" d="M3 9v6c0 1.105.895 2 2 2h4l5 5V4H9c-1.105 0-2 .895-2 2v3z"></path>
                            <path class="speaker-on" d="M17.5 3.5a4 4 0 0 1 0 5.66M19.07 4.93a8 8 0 0 1 0 11.31"></path>
                            <!-- Altavoz mudo (oculto inicialmente) -->
                            <path class="speaker-off" style="display:none;" d="M11 5L6 9H2v6h4l5 5V5z"></path>
                            <line class="speaker-off" style="display:none;" x1="23" y1="9" x2="17" y2="15"></line>
                            <line class="speaker-off" style="display:none;" x1="17" y1="9" x2="23" y2="15"></line>
                        </svg>
                    </button>
                    <span class="control-status" id="audioStatus">SOUND EFFECTS: ON</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Contact Form Modal -->
    <div class="contact-modal" id="contactModal">
        <div class="contact-modal-content">
            <button class="contact-close" id="contactClose">&times;</button>
            <h2>CONTACT US</h2>
            <form id="contactForm">
                <div class="form-group">
                    <input type="text" id="name" name="name" placeholder="NAME" required>
                </div>
                <div class="form-group">
                    <input type="email" id="email" name="email" placeholder="EMAIL" required>
                </div>
                <div class="form-group">
                    <textarea id="message" name="message" placeholder="MESSAGE" rows="5" required></textarea>
                </div>
                <button type="submit" class="submit-btn">SEND</button>
            </form>
        </div>
    </div>

    <main>
        <section class="hero" id="heroSection" style="background-image: url(assets/images/g-11.webp);">
            <div class="container">
                <h1>AW20</h1>
            </div>
        </section>

        <section class="grid-view">
            <div class="container-fluid">
                <div class="grid-view-content">
                    <div class="item">
                        <img src="assets/images/g-11.webp" alt="">
                    </div>
                    <div class="item">
                        <img src="assets/images/g-12.webp" alt="">
                    </div>
                    <div class="item">
                        <img src="assets/images/g-16.avif" alt="">
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Load scripts at the end for better performance -->
    <script src="assets/js/script.js"></script>
    <script src="assets/js/cursor-effect.js"></script>
    <script src="assets/js/grain-effect.js"></script>
    <script src="assets/js/controls.js"></script>

    <script>
        window.addEventListener('popstate', function () {
            window.location.href = 'index.html';
        });

        // Menu toggle functionality
        document.addEventListener('DOMContentLoaded', function() {
            const menuToggle = document.getElementById('menuToggle');
            const dropdownMenu = document.getElementById('dropdownMenu');
            const body = document.body;

            if (menuToggle && dropdownMenu) {
                menuToggle.addEventListener('click', function() {
                    menuToggle.classList.toggle('active');
                    dropdownMenu.classList.toggle('active');
                    body.classList.toggle('menu-open');
                });
            }

            // Collections submenu toggle
            const collectionsToggle = document.getElementById('collectionsToggle');
            const collectionsSubmenu = document.getElementById('collectionsSubmenu');

            if (collectionsToggle && collectionsSubmenu) {
                collectionsToggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    collectionsSubmenu.classList.toggle('active');
                    collectionsToggle.classList.toggle('active');
                });
            }

            // Contact modal functionality
            const contactBtn = document.getElementById('contactBtn');
            const contactModal = document.getElementById('contactModal');
            const contactClose = document.getElementById('contactClose');

            if (contactBtn && contactModal && contactClose) {
                contactBtn.addEventListener('click', function() {
                    contactModal.classList.add('active');
                });

                contactClose.addEventListener('click', function() {
                    contactModal.classList.remove('active');
                });

                contactModal.addEventListener('click', function(e) {
                    if (e.target === contactModal) {
                        contactModal.classList.remove('active');
                    }
                });
            }
        });
    </script>
</body>

</html>